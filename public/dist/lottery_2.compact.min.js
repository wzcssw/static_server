"use strict";window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},function(){var t,i,o,n,e,r,a=150,l=[],h=0,s=!1,c=!0,d=!0,m={colorOptions:["DodgerBlue","OliveDrab","Gold","pink","SlateBlue","lightblue","Violet","PaleGreen","SteelBlue","SandyBrown","Chocolate","Crimson"],colorIndex:0,colorIncrementer:0,colorThreshold:10,getColor:function(){return this.colorIncrementer>=10&&(this.colorIncrementer=0,this.colorIndex++,this.colorIndex>=this.colorOptions.length&&(this.colorIndex=0)),this.colorIncrementer++,this.colorOptions[this.colorIndex]}};function confettiParticle(t){var e,r;this.x=Math.random()*o,this.y=Math.random()*n-n,this.r=(e=10,r=30,Math.floor(Math.random()*(r-e+1)+e)),this.d=Math.random()*a+10,this.color=t,this.tilt=Math.floor(10*Math.random())-10,this.tiltAngleIncremental=.07*Math.random()+.05,this.tiltAngle=0,this.draw=function(){return i.beginPath(),i.lineWidth=this.r/2,i.strokeStyle=this.color,i.moveTo(this.x+this.tilt+this.r/4,this.y),i.lineTo(this.x+this.tilt,this.y+this.tilt+this.r/4),i.stroke()}}function InitializeConfetti(){s=!0,l=[],d=!1;for(var e=0;e<a;e++){var u=m.getColor();l.push(new confettiParticle(u))}o=window.innerWidth,n=window.innerHeight,t.width=o,t.height=n,function animloop(){return d?null:(r=requestAnimFrame(animloop),function(){i.clearRect(0,0,o,n);for(var t=[],e=0;e<a;e++)r=e,t.push(l[r].draw());var r;return function(){var t,i=0;h+=.01,.1;for(var o=0;o<a;o++){if(t=l[o],d)return;!c&&t.y<-15?t.y=n+100:(stepParticle(t,o),t.y<=n&&i++,CheckForReposition(t,o))}0===i&&StopConfetti()}(),t}())}()}function CheckForReposition(t,i){(t.x>o+20||t.x<-20||t.y>n)&&c&&(i%5>0||i%2==0?repositionParticle(t,Math.random()*o,-10,Math.floor(10*Math.random())-20):Math.sin(h)>0?repositionParticle(t,-20,Math.random()*n,Math.floor(10*Math.random())-20):repositionParticle(t,o+20,Math.random()*n,Math.floor(10*Math.random())-20))}function stepParticle(t,i){t.tiltAngle+=t.tiltAngleIncremental,t.y+=(Math.cos(h+t.d)+3+t.r/2)/2,t.x+=Math.sin(h),t.tilt=15*Math.sin(t.tiltAngle-i/3)}function repositionParticle(t,i,o,n){t.x=i,t.y=o,t.tilt=n}function ClearTimers(){clearTimeout(e),clearTimeout(r)}function StopConfetti(){d=!0,void 0!=i&&i.clearRect(0,0,o,n)}window.readyConfetti=function(){t=document.getElementById("dh-confetti-canvas"),i=t.getContext("2d"),o=window.innerWidth,n=window.innerHeight,t.width=o,t.height=n},window.stopConfetti=function(){c=!1,ClearTimers()},window.startConfetti=function(){if(!s)return InitializeConfetti();ClearTimers(),StopConfetti(),console.log("reactivationTimerHandler"),e=setTimeout(function(){c=!0,d=!1,InitializeConfetti()},100)}}();
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){function MaterialAvatar(t,e){if(!t)throw new Error("No elements selected/found");var i=this;this.options={colorPalette:["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d"],fontFamily:"Arial"},this.name="MaterialAvatar",function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}(i.options,e),this.elements=t,this.elements[0]?(this.elements=[].slice.call(this.elements),this.elements.forEach(function(t){t.avatar=new Avatar(t,i.options)})):this.elements.avatar=new Avatar(t,i.options)}function Avatar(t,i){if(!t)throw new Error("No element selected/found");var o=this;this.element=t,this.options=i,this.canvas=e.createElement("canvas"),requestAnimationFrame(function(){return o.init()})}MaterialAvatar.prototype.updateOptions=function(t){var e=this;t&&(this.options=t),this.elements.forEach(function(t){t.avatar.options=e.options})},Avatar.prototype.init=function(){this.width=parseInt(this.element.offsetWidth,10),this.height=parseInt(this.element.offsetHeight,10),this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.width),this.initials=this.getInitials(),this.fontSize=this.getFontSize(),this.render()},Avatar.prototype.render=function(){this.backgroundColor=this.generateColor(this.initials.charCodeAt(0)-65),this.context=this.canvas.getContext("2d"),this.context.font=this.fontSize+"px/0px "+this.options.fontFamily,this.context.textAlign="center",this.options&&"circle"===this.options.shape?this._drawCircle():this._drawSquare(),this.context.fillStyle=this.getTextColor(),this.context.fillText(this.initials,this.width/2,this.height/2+.68*this.fontSize/2),this.element.innerHTML="",this.element.appendChild&&this.element.appendChild(this.canvas)},Avatar.prototype._drawCircle=function(){var t=this.width/2,e=this.height/2,i=this.width/2;this.context.beginPath(),this.context.arc(t,e,i,0,2*Math.PI,!1),this.context.fillStyle=this.backgroundColor,this.context.fill()},Avatar.prototype._drawSquare=function(){this.context.fillStyle=this.backgroundColor,this.context.fillRect(0,0,this.width,this.height)},Avatar.prototype.getInitials=function(){if(this.options.initials)return this.options.initials;this.name=this.options.name||this.element.getAttribute&&this.element.getAttribute("data-name")||this.element.innerHTML&&this.element.innerHTML.trim()||" ";var t=this.name.split(" ");return this.element.setAttribute&&this.element.setAttribute("data-name",this.name),t.length>1?t[0].charAt(0).toUpperCase()+t[1].charAt(0).toUpperCase():t[0].charAt(0).toUpperCase()},Avatar.prototype.getFontSize=function(){return this.options.fontSize?"function"==typeof this.options.fontSize?this.options.fontSize(this.height,this.initials.length):this.options.fontSize:this.height/(.5*this.initials.length+1)},Avatar.prototype.getTextColor=function(){if(this.options.textColor)return this.options.textColor;var t=this._hexToRgb(this.backgroundColor);if(!t)return"#222";var e=299*t.r+587*t.g+114*t.b;return Math.round(e/1e3)>125?"#222":"#fff"},Avatar.prototype._hexToRgb=function(t){var e;return t?(t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,o){return e+e+i+i+o+o}),(e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null):{r:0,g:0,b:0}},Avatar.prototype.generateColor=function(t){if(this.options.backgroundColor)return this.options.backgroundColor;if(void 0!==("undefined"==typeof randomColor?"undefined":_typeof(randomColor))){if(this.options&&this.options.randomColor)return randomColor(this.options.randomColor);if(!this.options)return randomColor()}return this.options.colorPalette[Math.abs(t)%this.options.colorPalette.length]},t.MaterialAvatar=MaterialAvatar,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.materialAvatar=function(t){return this.each(function(){jQuery.data(this,"plugin_materialAvatar")||jQuery.data(this,"plugin_materialAvatar",new MaterialAvatar(this,t))})})}(window,document);
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){function require(e){var t=require.modules[e];if(!t)throw new Error('failed to require "'+e+'"');return"exports"in t||"function"!=typeof t.definition||(t.client=t.component=!0,t.definition.call(this,t.exports={},t),delete t.definition),t.exports}require.loader="component",require.helper={},require.helper.semVerSort=function(e,t){for(var r=e.version.split("."),n=t.version.split("."),o=0;o<r.length;++o){var i=parseInt(r[o],10),s=parseInt(n[o],10);if(i!==s)return i>s?1:-1;var u=r[o].substr((""+i).length),a=n[o].substr((""+s).length);if(""===u&&""!==a)return 1;if(""!==u&&""===a)return-1;if(""!==u&&""!==a)return u>a?1:-1}return 0},require.latest=function(e,t){function showError(e){throw new Error('failed to find latest module of "'+e+'"')}var r=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/;/(.*)~(.*)/.test(e)||showError(e);for(var n=Object.keys(require.modules),o=[],i=[],s=0;s<n.length;s++){var u=n[s];if(new RegExp(e+"@").test(u)){var a=u.substr(e.length+1);null!=r.exec(u)?o.push({version:a,name:u}):i.push({version:a,name:u})}}if(0===o.concat(i).length&&showError(e),o.length>0){var c=o.sort(require.helper.semVerSort).pop().name;return!0===t?c:require(c)}c=i.sort(function(e,t){return e.name>t.name})[0].name;return!0===t?c:require(c)},require.modules={},require.register=function(e,t){require.modules[e]={definition:t}},require.define=function(e,t){require.modules[e]={exports:t}},require.register("component~transform-property@0.0.1",function(e,t){for(var r,n=["webkitTransform","MozTransform","msTransform","OTransform","transform"],o=document.createElement("p"),i=0;i<n.length;i++)if(r=n[i],null!=o.style[r]){t.exports=r;break}}),require.register("component~has-translate3d@0.0.3",function(e,t){var r=require("component~transform-property@0.0.1");if(r&&window.getComputedStyle){var n=document.createElement("div");n.style[r]="translate3d(1px,1px,1px)",document.body.insertBefore(n,null);var o=getComputedStyle(n).getPropertyValue({webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"}[r]);document.body.removeChild(n),t.exports=null!=o&&o.length&&"none"!=o}else t.exports=!1}),require.register("yields~has-transitions@1.0.0",function(e,t){t.exports=function(e){switch(arguments.length){case 0:return n;case 1:return n?!!(t=e).transition||(r=window.getComputedStyle(t),!!parseFloat(r.transitionDuration,10)):n}var t,r};var r=document.body.style,n="transition"in r||"webkitTransition"in r||"MozTransition"in r||"msTransition"in r}),require.register("component~event@0.1.4",function(e,t){var r=window.addEventListener?"addEventListener":"attachEvent",n=window.removeEventListener?"removeEventListener":"detachEvent",o="addEventListener"!==r?"on":"";e.bind=function(e,t,n,i){return e[r](o+t,n,i||!1),n},e.unbind=function(e,t,r,i){return e[n](o+t,r,i||!1),r}}),require.register("ecarter~css-emitter@0.0.1",function(e,t){var r=require("component~event@0.1.4"),n=["transitionend","webkitTransitionEnd","oTransitionEnd","MSTransitionEnd","animationend","webkitAnimationEnd","oAnimationEnd","MSAnimationEnd"];function CssEmitter(e){if(!(this instanceof CssEmitter))return new CssEmitter(e);this.el=e}t.exports=CssEmitter,CssEmitter.prototype.bind=function(e){for(var t=0;t<n.length;t++)r.bind(this.el,n[t],e);return this},CssEmitter.prototype.unbind=function(e){for(var t=0;t<n.length;t++)r.unbind(this.el,n[t],e);return this},CssEmitter.prototype.once=function(e){var t=this;return t.bind(function on(){t.unbind(on),e.apply(t.el,arguments)}),this}}),require.register("component~once@0.0.1",function(e,t){var r=0,n=function(){return this}();t.exports=function(e){var t=r++;return function once(){if(this==n){if(once.called)return;return once.called=!0,e.apply(this,arguments)}var r="__called_"+t+"__";if(!this[r])return this[r]=!0,e.apply(this,arguments)}}}),require.register("yields~after-transition@0.0.1",function(e,t){var r=require("yields~has-transitions@1.0.0"),n=require("ecarter~css-emitter@0.0.1"),o=require("component~once@0.0.1"),i=r();function after(e,t){return i&&r(e)?(n(e).bind(t),t):t()}t.exports=after,after.once=function(e,t){var r=o(t);after(e,t=function(){n(e).unbind(t),r()})}}),require.register("component~emitter@1.2.0",function(e,t){function Emitter(e){if(e)return function(e){for(var t in Emitter.prototype)e[t]=Emitter.prototype[t];return e}(e)}t.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Emitter.prototype.once=function(e,t){function on(){this.off(e,on),t.apply(this,arguments)}return on.fn=t,this.on(e,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t);return this},Emitter.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Emitter.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),require.register("yields~css-ease@0.0.1",function(e,t){var r;t.exports=(_defineProperty(r={in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)","ease-in-quad":"cubic-bezier(0.550, 0.085, 0.680, 0.530)","ease-in-cubic":"cubic-bezier(0.550, 0.055, 0.675, 0.190)","ease-in-quart":"cubic-bezier(0.895, 0.030, 0.685, 0.220)","ease-in-quint":"cubic-bezier(0.755, 0.050, 0.855, 0.060)","ease-in-sine":"cubic-bezier(0.470, 0.000, 0.745, 0.715)","ease-in-expo":"cubic-bezier(0.950, 0.050, 0.795, 0.035)","ease-in-circ":"cubic-bezier(0.600, 0.040, 0.980, 0.335)","ease-in-back":"cubic-bezier(0.600, -0.280, 0.735, 0.045)","ease-out-quad":"cubic-bezier(0.250, 0.460, 0.450, 0.940)","ease-out-cubic":"cubic-bezier(0.215, 0.610, 0.355, 1.000)","ease-out-quart":"cubic-bezier(0.165, 0.840, 0.440, 1.000)","ease-out-quint":"cubic-bezier(0.230, 1.000, 0.320, 1.000)","ease-out-sine":"cubic-bezier(0.390, 0.575, 0.565, 1.000)","ease-out-expo":"cubic-bezier(0.190, 1.000, 0.220, 1.000)","ease-out-circ":"cubic-bezier(0.075, 0.820, 0.165, 1.000)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.320, 1.275)"},"ease-out-quad","cubic-bezier(0.455, 0.030, 0.515, 0.955)"),_defineProperty(r,"ease-out-cubic","cubic-bezier(0.645, 0.045, 0.355, 1.000)"),_defineProperty(r,"ease-in-out-quart","cubic-bezier(0.770, 0.000, 0.175, 1.000)"),_defineProperty(r,"ease-in-out-quint","cubic-bezier(0.860, 0.000, 0.070, 1.000)"),_defineProperty(r,"ease-in-out-sine","cubic-bezier(0.445, 0.050, 0.550, 0.950)"),_defineProperty(r,"ease-in-out-expo","cubic-bezier(1.000, 0.000, 0.000, 1.000)"),_defineProperty(r,"ease-in-out-circ","cubic-bezier(0.785, 0.135, 0.150, 0.860)"),_defineProperty(r,"ease-in-out-back","cubic-bezier(0.680, -0.550, 0.265, 1.550)"),r)}),require.register("component~query@0.0.3",function(e,t){function one(e,t){return t.querySelector(e)}(e=t.exports=function(e,t){return one(e,t=t||document)}).all=function(e,t){return(t=t||document).querySelectorAll(e)},e.engine=function(t){if(!t.one)throw new Error(".one callback required");if(!t.all)throw new Error(".all callback required");return one=t.one,e.all=t.all,e}}),require.register("move",function(e,t){var r=require("component~emitter@1.2.0"),n=require("component~query@0.0.3"),o=require("yields~after-transition@0.0.1"),i=require("component~has-translate3d@0.0.3"),s=require("yields~css-ease@0.0.1"),u=i?["translate3d(",", 0)"]:["translate(",")"];t.exports=Move;var a=window.getComputedStyle||window.currentStyle;function Move(e){if(!(this instanceof Move))return new Move(e);if("string"==typeof e&&(e=n(e)),!e)throw new TypeError("Move must be initialized with element or selector");this.el=e,this._props={},this._rotate=0,this._transitionProps=[],this._transforms=[],this.duration(Move.defaults.duration)}Move.version="0.5.0",Move.ease=s,Move.defaults={duration:500},Move.select=function(e){return"string"!=typeof e?e:n(e)},r(Move.prototype),Move.prototype.transform=function(e){return this._transforms.push(e),this},Move.prototype.skew=function(e,t){return this.transform("skew("+e+"deg, "+(t||0)+"deg)")},Move.prototype.skewX=function(e){return this.transform("skewX("+e+"deg)")},Move.prototype.skewY=function(e){return this.transform("skewY("+e+"deg)")},Move.prototype.translate=Move.prototype.to=function(e,t){return this.transform(u.join(e+"px, "+(t||0)+"px"))},Move.prototype.translateX=Move.prototype.x=function(e){return this.transform("translateX("+e+"px)")},Move.prototype.translateY=Move.prototype.y=function(e){return this.transform("translateY("+e+"px)")},Move.prototype.scale=function(e,t){return this.transform("scale("+e+", "+(t||e)+")")},Move.prototype.scaleX=function(e){return this.transform("scaleX("+e+")")},Move.prototype.matrix=function(e,t,r,n,o,i){return this.transform("matrix("+[e,t,r,n,o,i].join(",")+")")},Move.prototype.scaleY=function(e){return this.transform("scaleY("+e+")")},Move.prototype.rotate=function(e){return this.transform("rotate("+e+"deg)")},Move.prototype.ease=function(e){return e=s[e]||e||"ease",this.setVendorProperty("transition-timing-function",e)},Move.prototype.animate=function(e,t){for(var r in t)t.hasOwnProperty(r)&&this.setVendorProperty("animation-"+r,t[r]);return this.setVendorProperty("animation-name",e)},Move.prototype.duration=function(e){return e=this._duration="string"==typeof e?1e3*parseFloat(e):e,this.setVendorProperty("transition-duration",e+"ms")},Move.prototype.delay=function(e){return e="string"==typeof e?1e3*parseFloat(e):e,this.setVendorProperty("transition-delay",e+"ms")},Move.prototype.setProperty=function(e,t){return this._props[e]=t,this},Move.prototype.setVendorProperty=function(e,t){return this.setProperty("-webkit-"+e,t),this.setProperty("-moz-"+e,t),this.setProperty("-ms-"+e,t),this.setProperty("-o-"+e,t),this},Move.prototype.set=function(e,t){return this.transition(e),this._props[e]=t,this},Move.prototype.add=function(e,t){if(a){var r=this;return this.on("start",function(){var n=parseInt(r.current(e),10);r.set(e,n+t+"px")})}},Move.prototype.sub=function(e,t){if(a){var r=this;return this.on("start",function(){var n=parseInt(r.current(e),10);r.set(e,n-t+"px")})}},Move.prototype.current=function(e){return a(this.el).getPropertyValue(e)},Move.prototype.transition=function(e){return this._transitionProps.indexOf(e)?(this._transitionProps.push(e),this):this},Move.prototype.applyProperties=function(){for(var e in this._props)this.el.style.setProperty(e,this._props[e],"");return this},Move.prototype.move=Move.prototype.select=function(e){return this.el=Move.select(e),this},Move.prototype.then=function(e){if(e instanceof Move)this.on("end",function(){e.end()});else{if("function"!=typeof e){var t=new Move(this.el);return t._transforms=this._transforms.slice(0),this.then(t),t.parent=this,t}this.on("end",e)}return this},Move.prototype.pop=function(){return this.parent},Move.prototype.reset=function(){return this.el.style.webkitTransitionDuration=this.el.style.mozTransitionDuration=this.el.style.msTransitionDuration=this.el.style.oTransitionDuration="",this},Move.prototype.end=function(e){var t=this;return this.emit("start"),this._transforms.length&&this.setVendorProperty("transform",this._transforms.join(" ")),this.setVendorProperty("transition-properties",this._transitionProps.join(", ")),this.applyProperties(),e&&this.then(e),o.once(this.el,function(){t.reset(),t.emit("end")}),this}}),"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=require("move"):"function"==typeof define&&define.amd?define("move",[],function(){return require("move")}):(this||window).move=require("move")}();
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e,t,n={},r={timeout:null,once:!1,title:"name",subtitle:null,api:null,confetti:!0,showbtn:!0,el:"body",speed:350,data:{},winners:[],winnerList:[],winnerHistory:[],number:1,_round:0,$el:null},o={shape:"circle"},a={},i="<i class='dh-icon dh-icon-dice'>🎲<svg><use xlink:href='#dh-dice'/></svg></i>",l=function(){n.$el=$(n.el),localStorage.getItem("lotteryHistory")&&(n.winnerHistory=JSON.parse(localStorage.getItem("lotteryHistory"))),function(r){var o=$("      <svg xmlns='http://www.w3.org/2000/svg' style='display: none;'>        <symbol id='dh-okay' viewBox='0 0 57 92'>          <path fill='currentColor' fill-rule='nonzero' d='M3.6 51c2.5-1 5.2.3 6.2 2.7 1.3 3.5 4.6 5.8 8.3 5.8 5 0 9.2-4 9.2-9s-4-9-9-9c-3.8 0-7 2.2-8.4 5.6C8.8 49.7 6 51 3.6 50c-2.4-1-3.6-3.7-2.6-6C3.8 36.4 10.5 32 18 32c3.5 0 6.7 1 9.5 2.5l-8.8-22c-1-2.5.3-5.2 2.7-6.2 2.4-1 5.2.3 6 2.7L37 32.4 33.4 6.2c-.3-2.5 1.5-5 4-5.3 2.7-.4 5 1.4 5.4 4L46 29.7l1-11c.2-2.7 2.5-4.7 5-4.4 2.7.2 4.7 2.5 4.4 5l-3.6 41-4 30.8h-29l4.8-23.3c-2 .8-4.2 1.2-6.5 1.2C10.6 69 4 64.2 1 57c-1-2.4.2-5.2 2.6-6z'/>        </symbol>        <symbol id='dh-crown' viewBox='0 0 88 81'>          <path fill='currentColor' fill-rule='nonzero' d='M83 23c-2.6 0-4.8 2.3-4.8 5 0 1.6.8 3 2 4L69.6 48.2l-4-27.8c2.5-.3 4.3-2.3 4.3-4.7 0-2.7-2.2-4.8-4.8-4.8-2.7 0-4.8 2-4.8 4.8 0 2 1.3 3.8 3 4.4l-8 22-9.8-32c2-.6 3.4-2.4 3.4-4.6C48.8 3 46.6.8 44 .8c-2.6 0-4.8 2.2-4.8 4.8 0 2.2 1.4 4 3.4 4.6l-9.8 32-8-22c1.8-.6 3-2.4 3-4.4 0-2.7-2-4.8-4.7-4.8-2.6 0-4.7 2-4.7 4.8 0 2.4 1.8 4.3 4 4.7l-3.8 27.8-11-16.5c1.4-.8 2.3-2.3 2.3-4C9.8 25.2 7.6 23 5 23 2.4 23 .2 25.2.2 27.8c0 2.7 2.2 4.8 4.8 4.8.4 0 .8 0 1.2-.2l9.7 41s18.6-1.6 28-1.6c9.4 0 28 1.6 28 1.6L82 32.6H83c2.6 0 4.8-2 4.8-4.7s-2.2-5-4.8-5zM26 62.7c-2 0-3.6-1.6-3.6-3.5 0-2 1.6-3.5 3.6-3.5s3.6 1.6 3.6 3.6-1.6 3.6-3.6 3.6zm18 2.2c-3.2 0-5.8-2.5-5.8-5.7 0-3 2.6-5.7 5.8-5.7 3.2 0 5.8 2.6 5.8 5.8 0 3.3-2.6 5.8-5.8 5.8zm18-2.2c-2 0-3.6-1.6-3.6-3.5 0-2 1.6-3.5 3.6-3.5s3.6 1.6 3.6 3.6-1.6 3.6-3.6 3.6z'/>        </symbol>        <symbol id='dh-dice' viewBox='0 0 90 76'>          <path fill='currentColor' fill-rule='nonzero' d='M83.6 34.5c-1-.4-2.2 0-2.6 1-.4 1 0 2.3 1 2.7 4.4 1.7 4 3.2 3.6 4-.5 1.8-5.8 4-12.7 5.3l8.7-15.2c1.7-3 .7-6.7-2.3-8.4L39.7 1c-3-1.8-6.7-.7-8.5 2.2L10.8 38.6c-4.4-1.4-6.6-3-6.6-4 0-2 2.6-4.3 9.8-6 1-.2 1.8-1.3 1.6-2.4-.3-1-1.4-1.8-2.4-1.5C1.8 27.3.2 32 .2 34.5c0 7 14 9.5 21.7 10.4 0-.2 0-.3-.2-.5-.8-3 1-6 4-6.7 2.8-.8 5.8 1 6.6 4 .8 2.8-1 5.8-4 6.6-2 .6-4.3-.3-5.6-2-.5.5-1 .8-1.8.7-5.4-.4-9.8-1.3-13.3-2.4-.6 2.6.5 5.4 3 6.8l38.8 22.4s2.4 1.6 4.2 1.6c1.8 0 3.4-1.6 3.4-1.6.8-.4 1.3-1 1.7-1.8l10-17.2-6.3.3c-1 0-2-.6-2-1.5-.2-.2-.2-.4-.2-.6 9-.3 27-2.8 29.3-9.5 1-2.7.6-6.5-6-9zm-48-13.7c-1-3 1-6 3.8-6.7 3-.7 6 1 6.7 4 1 3-1 6-3.8 6.7-3 .7-6-1-6.7-4zm15 40.3c-3 1-6-.8-6.7-3.7-1-3 1-6 3.8-6.7 3-.8 6 1 6.7 3.8.8 3-1 6-4 6.7zm13.7-23.6c-3 .8-6-1-6.7-4-.8-2.8 1-5.8 4-6.6 2.8-.7 5.8 1 6.6 4 .8 2.8-1 5.8-4 6.6z'/>        </symbol>        <symbol id='dh-save' viewBox='-4 -4 32 32'>          <path fill='currentColor' fill-rule='nonzero' d='M19 11h-14v-2h14v2zm0 2h-14v2h14v-2zm0 4h-14v2h14v-2zm3-11v16h-20v-16h20zm2-6h-24v24h24v-24z'/>        </symbol>      </svg>    "),a=navigator.platform&&(navigator.platform.toLowerCase().indexOf("mac")>=0||/iPad|iPhone|iPod/.test(navigator.platform));e=$("      <div class='dh-lottery"+(a?" is-mac":"")+"'></div>    ");var l=$("      <div id='dh-lottery-selector' style='display: none'>      </div>    "),s=$("      <div class='main-container'>        <canvas id='dh-confetti-canvas'></canvas>        <div class='userlist columns is-multiline is-mobile'></div>      </div>    "),d=$("      <div class='actions'>        <a class='button primary' id='dh-history-show'><i class='dh-icon dh-icon-dice'>💾<svg><use xlink:href='#dh-save'/></svg></i></a>        <a class='button primary' id='dh-lottery-go'>"+i+"</a>      </div>    "),u=$("      <div class='dh-animated dh-modal"+(a?" is-mac":"")+"' id='dh-lottery-winner'>        <div class='dh-modal-background'></div>        <div class='dh-modal-content'>        </div>        <button class='dh-modal-close'></button>      </div>    "),m=$("      <div class='dh-modal' id='dh-lottery-history'>        <div class='dh-modal-background'></div>        <div class='dh-modal-content'>        </div>        <button class='dh-modal-close'></button>        <button class='dh-history-clean dh-modal-btn'>Clean all</button>        <div class='dh-modal-config-number' >        <button class='dh-number-inc dh-modal-btn'>+</button>        <div class='dh-number dh-modal-btn'>1</div>        <button class='dh-number-dec dh-modal-btn'>-</button>        </div>      </div>    ");e.append(o),e.append(l),e.append(s),e.append(m),n.showbtn&&e.append(d),r.append(e),r.append(u),$("#dh-lottery-go").click(function(){return c?p():g()}),$("#dh-lottery-winner").click(function(){return $("#dh-lottery-winner").removeClass("is-active")}),$(".dh-modal-close").click(function(){window.location=t}),$("#dh-lottery-history .dh-modal-close").click(function(){return $("#dh-lottery-history").removeClass("is-active")}),$("#dh-lottery-history .dh-history-clean").click(function(){w()}),$("#dh-lottery-history .dh-number-inc").click(function(){n.number<10&&(n.number+=1,localStorage.setItem("lotteryConfigNumber",n.number),$("#dh-lottery-history .dh-number").text(n.number))}),$("#dh-lottery-history .dh-number").click(function(){n.number=1,localStorage.setItem("lotteryConfigNumber",n.number),$("#dh-lottery-history .dh-number").text(n.number)}),$("#dh-lottery-history .dh-number-dec").click(function(){n.number>1&&(n.number-=1,localStorage.setItem("lotteryConfigNumber",n.number),$("#dh-lottery-history .dh-number").text(n.number))}),$("#dh-history-show").click(function(){b(),$("#dh-lottery-history .dh-number").text(n.number)}),document.body.onkeydown=function(e){if(27==e.keyCode)return $(".dh-modal-close").click();if(32==e.keyCode){if($("#dh-lottery-winner").hasClass("is-active"))return;return $("#dh-lottery-go").click()}var t;70==e.keyCode&&((t=document.documentElement).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullScreen())}}(n.$el),$.each(n.data,function(e,t){var r,o;t.id=e,r=t,o='\n      <div class="column">\n        <div class="profile" data-profile="'+encodeURIComponent(JSON.stringify(r))+'">\n          <div class="profile__parent">\n              <div class="profile__wrapper">\n                <div class="profile__content">'+(r.avatar?'<div class="avatar"><span class="image avatar-image is-128x128"><img src="'+r.avatar+'" alt="avatar" /></span></div':'<div class="avatar"><span class="image dh-name-avatar avatar-image is-128x128">'+(r.data[n.title]||r.name)+"</span></div>")+"</div>\n              </div>\n          </div>\n        </div>\n      </div>\n    ",$(".userlist").append(o)}),new MaterialAvatar(document.getElementsByClassName("dh-name-avatar"),o),console.log("Lottery: "+n.data.length+" player"),n.confetti&&window.readyConfetti()},s=[],d=[],c=null,u=null;$(window).resize(function(){s=m();for(var e in d)y(e,d[e])});var m=function(){return $.map($(".profile"),function(e,t){return a[t]=e,$(e).find(".avatar-image").first().position()})},h=function(e){var t=0;for(var n in e)t++;return t},v=function(e){var t,r,a,i=$("\n      <div class='profile-item'>\n        <div class='avatar-image'>\n          <h1><i class='dh-icon dh-icon-crown'>👑<svg><use xlink:href='#dh-crown'/></svg></i></h1>\n          <div class='avatar'><span class='image avatar-image'><img src='' alt='avatar' /></span></div>\n        </div>\n        <h2 class='profile-name'></h2>\n        <h3 class='profile-subtitle'></h3>\n        <h4 class='profile-desc'></h4>\n      </div>\n    ");if(e){e.data&&Object.keys(e.data).length>0&&(r=e.data[n.title],t=e.data[n.subtitle],a=e.data[n.desc]);var l=r||e.name,s=t||e.company,d=a||"";e.avatar?i.find(".avatar-image img").attr("src",e.avatar):(i.find(".avatar-image img").remove(),i.find(".avatar-image").addClass("dh-name-avatar").text(l)),i.find(".profile-name").text(l),i.find(".profile-subtitle").text(s),i.find(".profile-desc").text(d)}$("#dh-lottery-winner .dh-modal-content").append(i),new MaterialAvatar(document.getElementsByClassName("dh-name-avatar"),o)},y=function(e,t){if($(a[t]).addClass("current"),s[t])return move("#dh-lottery-selector #selector_"+e).x(s[t].left-4).y(s[t].top-4).ease("in-out").duration(200).end(),d},f=function lotteryOnce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(s<=0)){var t=Math.floor(Math.random()*s.length);if(n.once&&n.winnerList[t]||$.inArray(t,d)>=0)return console.log("Lottery: dup, next."),lotteryOnce(e),!1;y(e,t),d.push(t)}},p=function(){n.$el.removeClass("running-lottery"),console.log("Lottery: stoping..."),clearTimeout(u),$("#dh-lottery-winner .dh-modal-content").html(""),n.winners=[];for(var e=0;e<d.length;e++){var r=JSON.parse(decodeURIComponent($($(".profile")[d[e]]).data("profile"))),o=r.id;n.winners[o]=r,n.winnerList[o]=r,v(r)}$("#dh-lottery-winner .dh-modal-content").removeClass("dh-morewinner").removeClass("dh-solowinner"),$(".dh-modal-content .profile-item").css("font-size","50px"),d.length>3&&$("#dh-lottery-winner .dh-modal-content").addClass("dh-morewinner"),d.length<4&&$(".dh-modal-content .profile-item").css("font-size","70px"),d.length<2&&($(".dh-modal-content .profile-item").css("font-size","90px"),$("#dh-lottery-winner .dh-modal-content").addClass("dh-solowinner")),clearInterval(c),console.log("Lottery: Ignore user #",n.winnerList),n.confetti&&(window.startConfetti(),setTimeout(function(){return window.stopConfetti()},1500)),setTimeout(function(){return $("#dh-lottery-winner").addClass("is-active")},700),c=null,$("#dh-lottery-go").removeClass("success").addClass("primary").html(i);var a={};a.time=(new Date).toLocaleString(),a.winner={};for(var l in n.winners)a.winner[l]=n.winners[l];n.winnerHistory.push(a),console.log("本轮中奖者名单:",a.winner);var s=[];return $.each(a.winner,function(e,t){s.push(t.name)}),$.ajax({type:"POST",url:"/kill_childs",data:{childs_name:s.join(","),test:s.length},dataType:"json",success:function(e){t="/?term="+e.next_term,window.next_url=t}}),localStorage.setItem("lotteryHistory",JSON.stringify(n.winnerHistory)),r},g=function(){if(function(){for(var e="",t=0;t<n.number;t++)e+="        <span class='image' id='selector_"+t+"'>          <div class='selector-border'></div>        </span>      ";$("#dh-lottery-selector").html(e),setTimeout(function(){s=m(),$("#dh-lottery-selector .image").show();for(var e=0;e<n.number;e++)y(e,0)},1e3)}(),n.once&&n.data.length-h(n.winnerList)<n.number)return alert("No user left to participate in lottery."),!1;console.log("Lottery: started"),n.$el.addClass("running-lottery"),$("#dh-lottery-winner").removeClass("is-active"),$("#dh-lottery-selector").show(),console.log("$('#dh-lottery-selector').show();");var e=function(){d=[],$(".dh-lottery .profile.current").removeClass("current");for(var e=0;e<n.number;e++)f(e);console.log("Lottery: moveToTarget #",d)};return e(),c=setInterval(e,n.speed),n.timeout&&(u=setTimeout(p,1e3*n.timeout)),$("#dh-lottery-go").removeClass("primary").addClass("success").html("<i class='dh-icon dh-icon-okay'>👌<svg><use xlink:href='#dh-okay'/></svg></i>"),!0},w=function(){return 1==confirm("Delete Lottery History. Sure?")&&(localStorage.setItem("lotteryHistory",""),n.winnerHistory=[],$("#dh-lottery-history .dh-modal-content").html(""),!0)},b=function(){var e=$("#dh-lottery-history .dh-modal-content");e.html("");var t,r,a=n.winnerHistory.reverse();for(var i in a){(d=a[i]).number=h(d.winner),d.i=Number(i)+1;var l=$("\n      <div class='dh-history-item'>\n        <div class='dh-history-info'>\n          <h1>"+(r=d).i+"</h1>\n          <p>"+r.time+"</p>\n        </div>\n        <div class='dh-history-user'>\n        </div>\n      </div>\n    ");for(var s in d.winner){var d=a[i].winner[s],c=$("\n      <div>\n        "+((t=d).avatar?'<div class="avatar"><span class="image avatar-image is-128x128"><img src="'+t.avatar+'" alt="avatar" /></span></div':'<div class="avatar"><span class="image dh-name-avatar avatar-image is-128x128">'+(t.data[n.title]||t.name)+"</span></div>")+"\n        <h3 class='name'>"+(t.data[n.title]||t.name)+"</h3>\n      </div>\n    ");l.find(".dh-history-user").append(c)}e.append(l)}return $("#dh-lottery-history").addClass("is-active"),new MaterialAvatar(document.getElementsByClassName("dh-name-avatar"),o),n.winnerHistory},C={init:function(e){null!=(n=$.extend({},r,e)).api?(n.api,$.ajax({type:"GET",url:n.api,dataType:"json",success:function(e){n.data=e,console.log("Lottery: API data loaded"),l()},error:function(e,t){alert("Lottery: Load player list error!\n"+t+"\n"+t)}})):l(),!e.number&&localStorage.lotteryConfigNumber&&(n.number=parseInt(localStorage.lotteryConfigNumber)||1)},start:function(){return g()},stop:function(){return p()},getUsers:function(){return n.data},winners:function(e){switch(e){case"get":return n.winners;case"clean":return n.winnerList=[],!0;default:console.error("Action "+e+" does not exist.")}},history:function(e){switch(e){case"show":return b();case"get":return n.winnerHistory;case"clean":return w();default:console.error("Action "+e+" does not exist.")}}};$.lottery=function(e){return C[e]?C[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==(void 0===e?"undefined":_typeof(e))&&e?void console.error("Method "+e+" does not exist."):C.init.apply(this,arguments)}}();